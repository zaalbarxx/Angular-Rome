"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var angular=_interopDefault(require("angular")),rome=_interopDefault(require("rome")),moment=_interopDefault(require("moment")),merge=_interopDefault(require("lodash.merge")),romeModule=angular.module("rome",[]);romeModule.provider("romeDefaults",function(){return{options:{},$get:function(){return this.options},set:function(e){this.options=e}}}),romeModule.directive("rome",["romeDefaults","$interval",function(e,t){function n(e){return!e||"true"==e}function r(e,t){var n=e.romeBefore||e.romeBeforeEq||e.romeAfterEq||e.romeAfter;if(n){var r=0===n.indexOf("#"),o=void 0,a=angular.element(document.getElementsByTagName("rome")).find("input");if(r)o=angular.element(document.getElementById(n.substr(1)));else for(var i=0;i<a.length;i++)if(a[i].getAttribute("ng-model")==n){o=angular.element(a[i]);break}if(!o)throw new Error("Cannot find rome instance from that ng-model.");e.romeBefore?t.dateValidator=rome.val.before(o[0]):e.romeBeforeEq?t.dateValidator=rome.val.beforeEq(o[0]):e.romeAfter?t.dateValidator=rome.val.after(o[0]):e.romeAfterEq&&(t.dateValidator=rome.val.afterEq(o[0]))}else t.dateValidator=Function.prototype}return{restrict:"AE",transclude:"attributes",scope:{ngModel:"=",ngChange:"=?",options:"<"},require:"^ngModel",template:'<div class="rome-container"><input type="text" ng-transclude class="rome-input"></div>',link:function(o,a,i){function l(){o.ngModel=u.getDateString(i.viewFormat||e.labelValue)}var u=void 0,m=a.find("input"),d=merge({},e),f=merge(d,{time:n(i.romeTime),date:n(i.romeDate),initialValue:i.romeInitialValue||moment().millisecond(0).second(0).minute(0).hour(0),autoHideOnBlur:!0,weekStart:i.romeWeekStart,monthsInCalendar:i.romeMonthsInCalendar,min:i.romeMin,max:i.romeMax,inputFormat:i.romeInputFormat,timeInterval:i.romeTimeInterval},o.options);u=rome(m[0],f),o.options.getApi=function(){return u},t(function(){r(i,f)},100,2),angular.forEach({id:i.id,name:i.name,disabled:i.disabled,readonly:i.readonly,required:i.required,novalidate:i.novalidate,"ng-value":i.ngValue,"ng-disabled":i.ngDisabled,"ng-change":i.ngChange,"ng-model":i.ngModel},function(e,t){angular.isDefined(e)&&(a.removeAttr(t),m.attr(t,e))}),u.on("ready",function(){o.$apply(function(){u.setValue(o.ngModel),l()})}),u.on("data",function(e){o.$apply(function(){l()})}),o.$watch("ngModel",function(e){e&&u.setValue(e)},!0),i.$observe("config",function(e){u.config(e)})}}}]);var moduleName=romeModule.name;module.exports=moduleName;
